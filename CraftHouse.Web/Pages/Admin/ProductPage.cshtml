@page "{productId}"
@model ProductPage

<a asp-page="/admin/Products">Return</a>

<br/><br/>

<div>EDIT PRODUCT</div>
<form method="post" asp-page-handler="Edit">
    <input type="hidden" asp-for="ProductId" value="@Model.ProductId"/>
    <input type="hidden" name="optionNumber" value="@Model.OptionNumber" />
    
    <label for="nameEdit">Name</label>
    <input type="text" id="nameEdit" asp-for="Name"/>

    <label for="isAvailableEdit">Is available</label>
    <select id="isAvailableEdit" asp-for="IsAvailable">
        <option value="true">available</option>
        <option value="false">unavailable</option>
    </select>

    <label for="priceEdit">Price</label>
    <input type="number" step="0.01" id="priceEdit" asp-for="Price" min="0"/>

    <label for="descriptionEdit">Description</label>
    <input type="text" id="descriptionEdit" asp-for="Description"/>

    <label for="categoryIdEdit">Category name</label>
    <select id="categoryIdEdit" asp-for="CategoryId">
        @foreach (var category in Model.Categories)
        {
            <option value="@category.Id">@category.Name</option>
        }
    </select>

    <input type="submit" value="Edit"/>
</form>

<br/><br/>

<div>OPTION ADD</div>
<form method="post" asp-page-handler="Option">
    <input type="hidden" asp-for="ProductId" value="@Model.ProductId"/>
    <input type="hidden" asp-for="OptionNumber" value="@Model.OptionNumber"/>
    
    <label for="name">Name</label>
    <input type="text" id="name" asp-for="Name"/>

    <br/>
    @for (var i = 0; i < @Model.OptionNumber; i++)
    {
        <label>Option value</label>
        <input type="text" class="optionValue" asp-for="OptionValues"/>

        <label>Option price</label>
        <input type="number" step="0.01" class="optionPrice" asp-for="OptionPrices"/>
        <br/>
    }

    <input type="submit" value="Add option"/>
</form>

<br/>

@if (Model.OptionNumber - 1 > 0)
{
    <a asp-page="/admin/ProductPage" asp-route-productId="@Model.ProductId" asp-route-optionNumber="@(Model.OptionNumber - 1)">Less options</a>
}

<a asp-page="/admin/ProductPage" asp-route-productId="@Model.ProductId" asp-route-optionNumber="@(Model.OptionNumber + 1)">More options</a>
