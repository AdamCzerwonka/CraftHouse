@page "{pageNumber:int=1}"
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<aside>
    <a asp-page="/Index" asp-route-pageNumber="1">All</a>
    @foreach (var category in Model.Categories)
    {
        <a asp-page="/Index"
           asp-route-pageNumber="1"
           asp-route-category="@category.Id">
            @category.Name
        </a>
    }
</aside>

<aside>
    @foreach (var sortValue in new[] { "Name", "Price" })
    {
        <a asp-page="/Index"
           asp-route-pageNumber="1"
           asp-route-category="@Model.CategoryId"
           asp-route-order="@sortValue">
            @sortValue
        </a>
        <a asp-page="/Index"
           asp-route-pageNumber="1"
           asp-route-category="@Model.CategoryId"
           asp-route-order="@sortValue"
           asp-route-isAscending="false">
            @sortValue descending
        </a>
    }
</aside>

<div class="products">
    @foreach (var prod in Model.Products)
    {
        <div class="products__product">
            <img class="product__photo" src="~/photos/pexels-irina-varanovich-14686152.jpg" alt="Product image"/>
            <p class="product__name">@prod.Name</p>
            <p>@prod.Description</p>
            <p>@prod.Price</p>
            <a asp-page="/Cart/Add" asp-route-productId="@prod.Id">Add to cart</a>
        </div>
    }
</div>
<div class="products__pagination">
    @if (Model.PageNumber != 1)
    {
        <a asp-page="/Index"
           asp-route-pageNumber="@(Model.PageNumber - 1)"
           asp-route-category="@Model.CategoryId"
           asp-route-order="@Model.Order"
           asp-route-isAscending="@Model.IsAscending">
            Prev Page
        </a>
    }
    <span>@Model.PageNumber</span>
    @if ((int)Model.ViewData["lastPageNumber"]! != Model.PageNumber)
    {
        <a asp-page="/Index"
           asp-route-pageNumber="@(Model.PageNumber + 1)"
           asp-route-category="@Model.CategoryId"
           asp-route-order="@Model.Order"
           asp-route-isAscending="@Model.IsAscending">
            Next Page
        </a>
    }
</div>